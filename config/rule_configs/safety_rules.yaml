# Safety Rules Configuration (Tier 1 - Non-Negotiable)
# These rules provide strict guardrails with automatic enforcement

rules:
  safety:
    enforcement: strict
    priority: critical
    auto_block: true
    audit_logging: comprehensive
    
    # Child Safety Rules
    child_protection:
      enabled: true
      patterns:
        - type: "content_filtering"
          keywords: ["child exploitation", "minor abuse", "underage content"]
          regex_patterns: ["\\b(child\\s+exploitation|minor\\s+abuse)\\b"]
          severity: critical
          action: block
          
        - type: "age_verification"
          min_age: 18
          restricted_content: ["adult", "explicit", "violent"]
          action: verify_age
          
        - type: "grooming_detection"
          ml_model: "grooming_detector_v1"
          confidence_threshold: 0.8
          action: block_and_report

    # Dangerous Information Prevention
    dangerous_content:
      enabled: true
      patterns:
        - type: "weapons_detection"
          categories: ["firearms", "explosives", "chemical weapons"]
          keywords: ["bomb", "weapon", "explosive", "firearm"]
          ml_model: "weapons_classifier_v2"
          severity: critical
          action: block
          
        - type: "controlled_substances"
          categories: ["drugs", "narcotics", "chemical compounds"]
          keywords: ["synthesis", "manufacture", "distribution"]
          severity: critical
          action: block
          
        - type: "critical_infrastructure"
          categories: ["power_grid", "water_supply", "telecommunications"]
          keywords: ["sabotage", "disruption", "attack"]
          severity: critical
          action: block_and_alert

    # Malicious Code Protection
    malicious_code:
      enabled: true
      patterns:
        - type: "code_analysis"
          static_analysis: true
          dynamic_analysis: true
          sandbox_execution: true
          suspicious_patterns:
            - "eval.*exec"
            - "base64_decode"
            - "system.*call"
          action: block
          
        - type: "malware_detection"
          signature_database: "malware_sigs_v3"
          heuristic_analysis: true
          behavior_analysis: true
          action: block_and_quarantine

    # Content Safety Filtering
    content_safety:
      enabled: true
      patterns:
        - type: "violence_detection"
          categories: ["graphic_violence", "self_harm", "terrorism"]
          ml_model: "violence_classifier_v1"
          confidence_threshold: 0.7
          action: block
          
        - type: "hate_speech"
          categories: ["racism", "sexism", "homophobia", "religious persecution"]
          ml_model: "hate_speech_detector_v2"
          confidence_threshold: 0.8
          action: block
          
        - type: "adult_content"
          categories: ["pornography", "explicit_sexual_content"]
          ml_model: "adult_content_classifier_v1"
          confidence_threshold: 0.9
          action: block

# Enforcement Configuration
enforcement:
  strict:
    auto_block: true
    user_override: false
    escalation_required: true
    audit_trail: comprehensive
    
    # Blocking Mechanisms
    blocking:
      immediate_response: true
      response_time_ms: 100
      fallback_response: "Content blocked due to safety policy violation"
      
    # Escalation Procedures
    escalation:
      critical_violations: true
      auto_report: true
      notify_admins: true
      legal_review: required_for_critical
      
    # Audit Requirements
    audit:
      log_all_interactions: true
      log_user_context: true
      log_content_hash: true
      retention_days: 2555  # 7 years for legal compliance

# Performance Configuration
performance:
  safety_rules:
    evaluation_timeout_ms: 50
    parallel_processing: true
    cache_results: true
    cache_ttl_seconds: 300
    
    # Model Optimization
    models:
      batch_inference: true
      model_sharding: false
      gpu_acceleration: true
      
    # Resource Limits
    resources:
      max_concurrent_evaluations: 100
      memory_limit_mb: 2048
      cpu_limit_cores: 4

# Integration Settings
integration:
  external_services:
    - name: "national_center_for_missing_and_exploited_children"
      endpoint: "https://report.cybertip.org"
      mandatory_reporting: true
      
    - name: "fbi_internet_crime_complaint_center"
      endpoint: "https://www.ic3.gov"
      mandatory_reporting: true
      
    - name: "law_enforcement_escalation"
      endpoint: "internal_security_service"
      escalation_required: true

# Compliance and Legal
compliance:
  regulations:
    - "COPPA"  # Children's Online Privacy Protection Act
    - "CSAM"   # Child Sexual Abuse Material
    - "DMCA"   # Digital Millennium Copyright Act
    - "GDPR"   # General Data Protection Regulation
    
  certification:
    iso_27001: true
    soc_2_type2: true
    hipaa: false  # Only if handling health data